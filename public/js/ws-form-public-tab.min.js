!function(t){"use strict";t.WS_Form.prototype.form_tab=function(){if(Object.keys(this.form.groups).length<=1)return!1;var e=this,a=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",o=parseInt(this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0,10),r=this.get_query_var("wsf_tab_index_"+this.form.id);""!==r&&(o=parseInt(r,10));var s=t(".wsf-group-tabs",this.form_canvas_obj),i=s.children();if(void 0===i[o]||void 0!==t(i[o]).attr("data-wsf-group-hidden")){o=0;var _=t(":not([data-wsf-group-hidden])",i);_.length&&(o=_.first().index()),e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",o)}"ws-form"===t.WS_Form.settings_plugin.framework?(s.hasClass("wsf-tabs")&&this.tabs_destroy(),this.tabs(s,{active:o})):this.form_tab_group_index_set(o),"function"==typeof this.form_progress_tabs&&this.form_progress_tabs();var n=this.framework.tabs.public;if(void 0!==n.event_js){var f=n.event_js,c=void 0!==n.event_type_js&&n.event_type_js,d=void 0!==n.event_selector_wrapper_js&&n.event_selector_wrapper_js,b=void 0!==n.event_selector_active_js&&n.event_selector_active_js;switch(c){case"wrapper":var l=t(d,this.form_canvas_obj);break;default:l=t("["+a+'^="#'+this.form_id_prefix+'group-"]',this.form_canvas_obj)}l.on(f,function(a,o){switch(c){case"wrapper":var r=t(b,l).index();break;default:r=t(this).parent().index()}e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",r),"function"==typeof e.form_progress_tabs&&e.form_progress_tabs(),"function"==typeof e.signatures_redraw&&e.signatures_redraw(r),"function"==typeof e.form_textarea&&e.form_textarea(),!1!==e.object_focus&&(e.object_focus.trigger("focus"),e.object_focus=!1),e.form_tab_active_event(r),e.trigger("tab-clicked")})}this.group_index=o},t.WS_Form.prototype.form_tab_active_event=function(t){this.group_index=t,this.form_label(),this.form_canvas_obj.trigger("wsf-group-index")},t.WS_Form.prototype.form_tab_validation=function(){var t=this;this.get_object_meta_value(this.form,"tab_validation")&&(this.form_canvas_obj.on("wsf-validate-silent",function(){t.form_tab_validation_process()}),this.form_tab_validation_process()),this.form_tab_active_event(this.group_index)},t.WS_Form.prototype.form_tab_validation_process=function(){if(this.get_object_meta_value(this.form,"tab_validation")){var e=this,a=!0,o=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",r=t(".wsf-group-tabs > :not([data-wsf-group-hidden]) > ["+o+"]",this.form_canvas_obj),s=r.length,i=0;r.each(function(e){if(t(t(this).attr(o)).is(":visible"))return i=e,!1}),r.each(function(r){if(e.form_tab_validation_previous(t(this),a),r<s-1){if(!0===a)var _=e.object_validate(t(t(this).attr(o)));else _=!1;e.form_tab_validation_current(t(this),_),a=_}!_&&i>r&&e.form_tab_group_index_set(r)}),this.form_navigation()}},t.WS_Form.prototype.form_tab_validation_current=function(e,a){var o=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",r=e.attr(o),s=t(r,this.form_canvas_obj),i=t('button[data-action="wsf-tab_next"]',s),_=this.get_object_meta_value(this.form,"tab_validation_show");a?_?s.attr("data-wsf-validated",""):i.prop("disabled",!1):_?s.removeAttr("data-wsf-validated"):i.prop("disabled",!0)},t.WS_Form.prototype.form_tab_validation_previous=function(t,e){var a=this.framework.tabs.public;void 0!==a.class_disabled&&(e?t.removeClass(a.class_disabled).removeAttr("data-wsf-tab-disabled").removeAttr("tabindex"):t.addClass(a.class_disabled).attr("data-wsf-tab-disabled","").attr("tabindex","-1")),void 0!==a.class_parent_disabled&&(e?t.parent().removeClass(a.class_parent_disabled):t.parent().addClass(a.class_parent_disabled))},t.WS_Form.prototype.form_tab_group_index_new=function(e,a){this.form_tab_group_index_set(a);var o=e.closest("[data-id]").attr("data-id"),r=this.field_data_cache[o],s=this.get_object_meta_value(r,"scroll_to_top",""),i=this.get_object_meta_value(r,"scroll_to_top_offset","0");i=""==i?0:parseInt(i,10);var _=this.form_canvas_obj.offset().top-i;switch(s){case"instant":t("html,body").scrollTop(_);break;case"smooth":var n=this.get_object_meta_value(r,"scroll_to_top_duration","0");n=""==n?0:parseInt(n,10),t("html,body").animate({scrollTop:_},n)}},t.WS_Form.prototype.form_tab_group_index_set=function(e){if(Object.keys(this.form.groups).length<=1)return!1;var a=this.framework.tabs.public;if(void 0!==a.activate_js){var o=a.activate_js;if(""!=o){var r={form:"#"+this.form_obj_id,index:e},s=this.mask_parse(o,r);t.globalEval("(function($) { $(function() {"+s+"}); })(jQuery);"),this.cookie_set("tab_index",e)}}"function"==typeof this.form_progress_tabs&&this.form_progress_tabs(),this.log("log_group_index",e),this.form_tab_active_event(e)}}(jQuery);