!function(o){"use strict";o.WS_Form.prototype.form_loader=function(){var r=this;o(".wsf-loader",this.form_canvas_obj).length||(this.form_canvas_obj.prepend(this.form_loader_get_html()),this.form_loader_css_vars(),new ResizeObserver(o=>{r.form_loader_position()}).observe(this.form_canvas_obj[0]),o(document).on("scroll",function(){r.form_loader_position()}),o(window).on("resize",function(){r.form_loader_position()}))},o.WS_Form.prototype.form_loader_css_vars=function(){var r=this.form_canvas_obj[0];this.form_loader_css_var_set_color(r,"loader_overlay_color","--wsf-loader-overlay-color","#ffffff"),this.form_loader_css_var_set_range(r,"loader_overlay_opacity","--wsf-loader-overlay-opacity",.5,0,1),this.form_loader_css_var_set_value(r,"loader_overlay_cursor","--wsf-loader-overlay-cursor","wait"),this.form_loader_css_var_set_range(r,"loader_fade_in_duration","--wsf-loader-fade-in-duration",0,0,5,"s"),this.form_loader_css_var_set_range(r,"loader_fade_out_duration","--wsf-loader-fade-out-duration",0,0,5,"s"),this.form_loader_css_var_set_range(r,"loader_sprite_animation_duration","--wsf-loader-sprite-animation-duration",1,.1,5,"s"),this.form_loader_css_var_set_color(r,"loader_sprite_color","--wsf-loader-sprite-color","#000000"),this.form_loader_css_var_set_color(r,"loader_sprite_color_accent","--wsf-loader-sprite-color-accent","#418fde"),this.form_loader_css_var_set_range(r,"loader_sprite_opacity","--wsf-loader-sprite-opacity",1,0,1),this.form_loader_css_var_set_range(r,"loader_sprite_opacity_accent","--wsf-loader-sprite-opacity-accent",1,0,1),this.form_loader_css_var_set_range(r,"loader_sprite_size","--wsf-loader-sprite-size",48,10,400,"px"),this.form_loader_css_var_set_range(r,"loader_sprite_border_width","--wsf-loader-sprite-border",5,1,100,"px"),this.form_loader_css_var_set_display(r,"loader_text_display","--wsf-loader-text-display","none");o(".wsf-loader",this.form_canvas_obj)},o.WS_Form.prototype.form_loader_css_var_set_range=function(o,r,e,t,a,s,_){void 0===_&&(_="");var i=parseFloat(this.get_object_meta_value(this.form,r,t));(i<a||i>s)&&(i=t),o.style.setProperty(e,i+_)},o.WS_Form.prototype.form_loader_css_var_set_color=function(o,r,e,t){var a=this.get_object_meta_value(this.form,r,t),s=this.hex_to_rgb(a);if(!1===s&&(s=this.hex_to_rgb(t)),!1===s)return!1;o.style.setProperty(e,s.r+", "+s.g+", "+s.b)},o.WS_Form.prototype.form_loader_css_var_set_display=function(o,r,e,t){var a=this.get_object_meta_value(this.form,r,t);o.style.setProperty(e,a?"block":"none")},o.WS_Form.prototype.form_loader_css_var_set_value=function(o,r,e,t){var a=this.get_object_meta_value(this.form,r,t);o.style.setProperty(e,a)},o.WS_Form.prototype.form_loader_position=function(){if(this.form_obj.hasClass("wsf-form-loader-show")){var r=o(".wsf-loader",this.form_canvas_obj);if(r.length){var e=this.form_canvas_obj.width(),t=this.form_canvas_obj.height();r.width(e).height(t);var a=o(".wsf-loader-inner",r);if(a.length){var s=-.5*a.width(),_=a.height(),i=-.5*_;if(this.get_object_meta_value(this.form,"loader_sprite_always_visible","on")){var l=o(document).scrollTop(),f=o(window).height();if(!r.position||"function"!=typeof r.position||"object"!=typeof r.position())return!1;var d=r.position().top,n=r.height(),m=l-d;m<0&&(m=0);var c=d-l;c<0&&(c=0);var h=d+n-l;h>f&&(h=f);var v=m+(h-c)/2,p=_/2+10,w=n-_/2-10;v>w&&(v=w),v<p&&(v=p),v-=n/2}else v=0;var u=this.form_canvas_obj[0];u.style.setProperty("--wsf-loader-sprite-offset-top-always-visible",v+"px"),u.style.setProperty("--wsf-loader-sprite-offset-top-align",i+"px"),u.style.setProperty("--wsf-loader-sprite-offset-left-align",s+"px")}}}},o.WS_Form.prototype.form_loader_get_html=function(){return'<div class="wsf-loader"><div class="wsf-loader-inner" role="alert" aria-live="assertive"></div></div>'},o.WS_Form.prototype.form_loader_show=function(r){if(void 0!==r&&!this.form_loader_showing){var e=this,t=function(){var r=e.get_object_meta_value(e.form,"loader_sprite_type","rotate-25-gap"),t="";switch(r){case"":t="";break;case"html":t=e.get_object_meta_value(e.form,"loader_sprite_html","");break;default:t='<div class="wsf-loader-sprite wsf-loader-sprite-'+e.esc_attr(r)+'"></div>';var a=e.get_object_meta_value(e.form,"loader_text","");""!=a&&(t+="<p>"+a+"</p>")}o(".wsf-loader .wsf-loader-inner",e.form_canvas_obj).html(t),o(".wsf-loader",e.form_canvas_obj).show(),e.form_obj.addClass("wsf-form-loader-show").removeClass("wsf-form-loader-hide"),e.form_loader_position(),e.form_loader_show_start=new Date,e.log("log_loader_show")};if("conditional"==r||this.get_object_meta_value(this.form,"loader_event_"+r)){e.form_loader_showing=!0;var a=parseFloat(this.get_object_meta_value(this.form,"loader_event_"+r+"_delay"));a?this.form_loader_timeout_id=setTimeout(function(){t()},1e3*a):t()}}},o.WS_Form.prototype.form_loader_hide=function(r){if(void 0===r&&(r=!0),this.form_loader_showing){this.form_loader_timeout_id&&clearTimeout(this.form_loader_timeout_id);var e=this,t=function(){e.form_obj.removeClass("wsf-form-loader-show").addClass("wsf-form-loader-hide");var r=parseFloat(e.get_object_meta_value(e.form,"loader_fade_out_duration","0"));setTimeout(function(){o(".wsf-loader",e.form_canvas_obj).hide(),o(".wsf-loader .wsf-loader-inner",e.form_canvas_obj).html(""),e.log("log_loader_hide")},1e3*r)};e.form_loader_showing=!1;var a=new Date-this.form_loader_show_start,s=Math.max(this.form_loader_show_duration_max-a,0);r?setTimeout(function(){t()},s):t()}}}(jQuery);