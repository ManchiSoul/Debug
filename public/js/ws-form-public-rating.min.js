!function(t){"use strict";t.WS_Form.prototype.form_rating=function(){var a=this,i=ws_form_settings.skin_spacing_small;t("[data-rating]:not([data-init-rating])",this.form_canvas_obj).each(function(){t(this).attr("data-init-rating","");var s=a.get_field_wrapper(t(this)),e=a.get_field(t(this)),r=parseInt(a.get_object_meta_value(e,"rating_max","5"),10);isNaN(r)&&(r=5),r<1&&(r=1),t(this).attr("min",0).attr("max",r);var l=t(this).val(),n=a.get_object_meta_value(e,"rating_icon","star"),c=parseInt(a.get_object_meta_value(e,"rating_size","24"),10);isNaN(c)&&(c=24),c<1&&(c=1);var o=t(this).attr("data-rating-color-off"),h=t(this).attr("data-rating-color-on"),g=void 0!==t(this).attr("readonly");if("custom"!=n){var d='<svg class="wsf-rating-icon" height="'+a.esc_attr(c)+'" width="'+a.esc_attr(c)+'" viewBox="0 0 16 16" style="display: block; height: auto; max-width: 100%;">';switch(n){case"heart":d+='<path d="M7.4,13.6c-0.3-0.4-1.2-1.1-1.9-1.7c-2.1-1.6-2.4-1.8-3.2-2.6C0.7,7.9,0,6.4,0,4.5 c0-1,0.1-1.3,0.3-1.9c0.5-1,1.1-1.7,2-2.1C2.9,0.1,3.2,0,4.2,0c1.1,0,1.3,0.1,1.9,0.5c0.8,0.4,1.5,1.3,1.7,1.9L8,2.8l0.2-0.5 c1.4-3,5.8-3,7.4,0.1c0.5,1,0.5,3.1,0.1,4.2c-0.6,1.5-1.6,2.7-4.1,4.5C10,12.2,8.2,14,8,14.3C7.9,14.6,8,14.3,7.4,13.6z" fill="'+a.esc_attr(o)+'" />';break;case"check":d+='<path d="M7.3 14.2l-7.1-5.2 1.7-2.4 4.8 3.5 6.6-8.5 2.3 1.8z" fill="'+a.esc_attr(o)+'" />';break;case"circle":d+='<path d="M0,8a8,8 0 1,0 16,0a8,8 0 1,0 -16,0" fill="'+a.esc_attr(o)+'" />';break;case"flag":d+='<path d="M11.8 1.2s-2.7 1.3-5.3.3C3.6.5 2.3.9 1 2.5c-.2-.1-.5-.1-.7 0-.3.2-.4.6-.2.9l7.1 11.5c.1.2.4.3.6.3.1 0 .2 0 .4-.1.3-.2.4-.6.2-1l-3.2-5c1.2-1.5 2.6-1.9 5.4-.9 2.7.9 5.4-.4 5.4-.4l-4.2-6.6z" fill="'+a.esc_attr(o)+'" />';break;case"smiley":d+='<path d="M8 16c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8 3.6 8 8 8zM8 1.5c3.6 0 6.5 2.9 6.5 6.5s-2.9 6.5-6.5 6.5S1.5 11.6 1.5 8 4.4 1.5 8 1.5zM4.6 5.6c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zm4.5 0c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zM11 9.3l1.3.8c-.9 1.5-2.5 2.4-4.3 2.4s-3.4-1-4.3-2.4L5 9.3c.6 1 1.7 1.7 3 1.7s2.4-.6 3-1.7z" fill="'+a.esc_attr(o)+'" />';break;case"square":d+='<path d="M0 0h16v16H0z" fill="'+a.esc_attr(o)+'" />';break;case"thumb":d+='<path d="M13.9 9.9c0 .7-.7 1.2-1.4 1.2.5.1 1.2.7 1.2 1.4s-.7 1.1-1.3 1.1h-.6c.5.1 1.1.8 1.1 1.4 0 .7-.7 1.1-1.4 1.1h-6c-2 0-3.5-1.6-3.5-3.6V8.7c0-1.4.8-2.9 2-3.3.9-.6 2.8-1.7 3.2-3.8V.1s2.6-.3 2.6 2.2c0 2.9-1.8 3.4-.4 3.5h2.2c.8 0 1.4.8 1.4 1.5s-.6 1.1-1.2 1.2h.6c.9 0 1.5.7 1.5 1.4z" fill="'+a.esc_attr(o)+'" />';break;default:d+='<path d="M12.9 15.8c-1.6-1.2-3.2-2.5-4.9-3.7-1.6 1.3-3.3 2.5-4.9 3.7 0 0-.1 0-.1-.1.6-2 1.2-4 1.9-6C3.3 8.4 1.7 7.2 0 5.9h6C6.7 3.9 7.3 2 8 0h.1c.7 1.9 1.3 3.9 2 5.9H16V6c-1.6 1.3-3.2 2.5-4.9 3.8.6 1.9 1.3 3.9 1.8 6 .1-.1 0 0 0 0z" fill="'+a.esc_attr(o)+'" />'}d+="</svg>"}else d=a.get_object_meta_value(e,"rating_icon_html","<span>*</span>");for(var f='<div class="wsf-rating-wrapper" tabindex="0" style="outline:0;"><ul class="wsf-rating" style="display: flex; list-style: none; margin: 0; padding: 0; user-select: none; justify-content: '+a.get_object_meta_value(e,"horizontal_align","left")+'">',v=1;v<=r;v++)f+='<li class="wsf-rating-'+a.esc_attr(v+(v<=l?" wsf-rating-selected":""))+'" style="'+(g?"":"cursor: pointer; ")+"display:inline-block; -webkit-padding-end: "+a.esc_attr(i)+"px; padding-inline-end: "+a.esc_attr(i)+'px; margin: 0;" data-value="'+a.esc_attr(v)+'" title="'+a.esc_attr(v)+'">'+d+"</li>";f+="</ul></div>",t(this).after(f),t("ul.wsf-rating > li",s).each(function(a){t("svg.wsf-rating-icon path",t(this)).attr("fill",t(this).hasClass("wsf-rating-selected")?h:o)}),t(this).on("change input",function(){a.form_rating_process(t(this),Math.round(parseFloat(t(this).val()),0))});var u=t(this);g||(t(".wsf-rating-wrapper",s).on("keydown",function(t){var a;39==t.keyCode&&(t.preventDefault(),(a=u.val())<r&&u.val(++a).trigger("change"));37==t.keyCode&&(t.preventDefault(),(a=u.val())>0&&u.val(--a).trigger("change"))}),t("ul.wsf-rating > li",s).on("click touchstart",function(){var a=t("[data-rating]",t(this).closest("[data-id]")),i=parseInt(t(this).attr("data-value"),10);a.val(i).attr("data-value-old",i).trigger("change")}),t("ul.wsf-rating > li",s).on("mouseover",function(){var a=t("[data-rating]",t(this).closest("[data-id]")),i=a.attr("data-rating-color-off"),s=a.attr("data-rating-color-on");a.attr("data-value-old",a.val());var e=Math.round(parseFloat(t(this).attr("data-value")),0);a.val(e).trigger("input"),t(this).parent().children("li").each(function(a){a<e?(t(this).addClass("wsf-rating-hover"),t("svg.wsf-rating-icon path",t(this)).attr("fill",s)):(t(this).removeClass("wsf-rating-hover"),t("svg.wsf-rating-icon path",t(this)).attr("fill",i))})}).on("mouseout",function(){var a=t("[data-rating]",t(this).closest("[data-id]"));if(void 0!==a.attr("data-value-old")){var i=a.attr("data-value-old");a.val(i).trigger("input")}t(this).parent().children("li").each(function(a){t(this).removeClass("wsf-rating-hover"),t("svg.wsf-rating-icon path",t(this)).attr("fill",t(this).hasClass("wsf-rating-selected")?h:o)})}))})},t.WS_Form.prototype.form_rating_process=function(a,i){var s=a.attr("data-rating-color-off"),e=a.attr("data-rating-color-on");t("ul li",a.parent()).each(function(a){a<i?(t(this).addClass("wsf-rating-selected"),t("svg.wsf-rating-icon path",t(this)).attr("fill",e)):(t(this).removeClass("wsf-rating-selected"),t("svg.wsf-rating-icon path",t(this)).attr("fill",s))})}}(jQuery);